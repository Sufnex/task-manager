<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Task Manager PWA - Collaborative Task Management with Firebase">
<meta name="keywords" content="task manager, todo, collaboration, firebase, pwa">
<meta name="author" content="Task Manager App">

<!-- Theme colors -->
<meta name="theme-color" content="#2196F3">
<meta name="msapplication-navbutton-color" content="#2196F3">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<!-- PWA Meta tags -->
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Task Manager">
<meta name="application-name" content="Task Manager">

<!-- Open Graph Meta Tags -->
<meta property="og:title" content="Task Manager - Collaborative Todo App">
<meta property="og:description" content="Modern task management with real-time collaboration">
<meta property="og:type" content="website">
<meta property="og:url" content="https://sufnex.github.io/task-manager/">
<meta property="og:image" content="https://sufnex.github.io/task-manager/icons/icon-512x512.png">

<!-- Twitter Card Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Task Manager - Collaborative Todo App">
<meta name="twitter:description" content="Modern task management with real-time collaboration">
<meta name="twitter:image" content="https://sufnex.github.io/task-manager/icons/icon-512x512.png">

<!-- Security Headers (csak ezeket hagyd meg) -->
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta http-equiv="X-XSS-Protection" content="1; mode=block">

<title>Task Manager - Collaborative PWA</title>

<!-- PWA Manifest -->
<link rel="manifest" href="./manifest.json">

<!-- Simplified Icons (SVG alapÃº) -->
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggc3Ryb2tlPSIjMjE5NkYzIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTkgMTFsMy0zIDQgNCIvPgo8cGF0aCBzdHJva2U9IiMyMTk2RjMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMjEgMTJjMCA0Ljk3MDYtNC4wMjk0IDktOSA5cy05LTQuMDI5NC05LTkgNC4wMjk0LTkgOS05IDkgNC4wMjk0IDkgOVoiLz4KPC9wYXRoPgo8L3N2Zz4K">

<!-- Styles -->
<link rel="stylesheet" href="./style.css">

<!-- Preconnect to Firebase -->
<link rel="preconnect" href="https://www.gstatic.com">
<link rel="preconnect" href="https://task-manager-sb.firebaseapp.com">
</head>

<body>
<!-- Connection Indicator -->
<div id="connection-indicator" class="hidden">
  <span id="connection-text">ğŸŒ Online</span>
</div>

<!-- ===== AUTHENTICATION MODAL ===== -->
<div id="auth-modal" class="modal">
  <div class="auth-container">
    <h1>ğŸš€ Task Manager</h1>
    <p style="color: var(--text-secondary); margin-bottom: 24px;">
      Collaborative task management with real-time sync
    </p>

    <!-- BejelentkezÃ©s Form -->
    <form id="login-form" class="auth-form">
      <h2>BejelentkezÃ©s</h2>
      <div class="form-group">
        <input 
          type="email" 
          id="login-email" 
          placeholder="Email cÃ­m" 
          required 
          autocomplete="email"
        >
      </div>
      <div class="form-group">
        <input 
          type="password" 
          id="login-password" 
          placeholder="JelszÃ³" 
          required 
          autocomplete="current-password" 
          minlength="6"
        >
      </div>
      <button type="submit" class="btn-primary">ğŸ”‘ BejelentkezÃ©s</button>
      <button type="button" id="google-signin" class="btn-google">
        ğŸŒ Google bejelentkezÃ©s
      </button>
      <p>
        Nincs mÃ©g fiÃ³kod?
        <a href="#" id="show-register">RegisztrÃ¡ciÃ³</a>
      </p>
    </form>

    <!-- RegisztrÃ¡ciÃ³ Form -->
    <form id="register-form" class="auth-form hidden">
      <h2>RegisztrÃ¡ciÃ³</h2>
      <div class="form-group">
        <input 
          type="text" 
          id="register-name" 
          placeholder="Teljes nÃ©v" 
          required 
          autocomplete="name"
        >
      </div>
      <div class="form-group">
        <input 
          type="email" 
          id="register-email" 
          placeholder="Email cÃ­m" 
          required 
          autocomplete="email"
        >
      </div>
      <div class="form-group">
        <input 
          type="password" 
          id="register-password" 
          placeholder="JelszÃ³ (min. 6 karakter)" 
          required 
          autocomplete="new-password" 
          minlength="6"
        >
      </div>
      <button type="submit" class="btn-primary">âœ¨ RegisztrÃ¡ciÃ³</button>
      <p>
        Van mÃ¡r fiÃ³kod?
        <a href="#" id="show-login">BejelentkezÃ©s</a>
      </p>
    </form>
  </div>
</div>

<!-- ===== FÅ ALKALMAZÃS ===== -->
<div id="main-app" class="hidden">
  <!-- Header -->
  <header class="header">
    <h1>ğŸ“‹ Task Manager</h1>
    <div class="header-controls">
      <div id="user-info">
        <span>ğŸ‘¤</span>
        <span id="user-name">FelhasznÃ¡lÃ³</span>
      </div>
      <button 
        id="open-share" 
        class="btn-icon" 
        title="Feladatok megosztÃ¡sa" 
        aria-label="Feladatok megosztÃ¡sa"
      >ğŸ‘¥</button>
      <button 
        id="add-task-btn" 
        class="btn-icon" 
        title="Ãšj feladat hozzÃ¡adÃ¡sa" 
        aria-label="Ãšj feladat hozzÃ¡adÃ¡sa"
      >â•</button>
      <button 
        id="view-toggle" 
        class="btn-icon" 
        title="NÃ©zet vÃ¡ltÃ¡s" 
        aria-label="NÃ©zet vÃ¡ltÃ¡s"
      >ğŸ“…</button>
      <button 
        id="logout-btn" 
        class="btn-icon" 
        title="KijelentkezÃ©s" 
        aria-label="KijelentkezÃ©s"
      >ğŸšª</button>
    </div>
  </header>

  <main class="main-content">
    <!-- SzÅ±rÅ‘k Ã©s keresÃ©s -->
    <section class="filters" aria-labelledby="filters-heading">
      <h2 id="filters-heading" style="display: none;">SzÅ±rÅ‘k Ã©s keresÃ©s</h2>
      <div class="search-box">
        <input
          type="text"
          id="search-input"
          placeholder="ğŸ” KeresÃ©s a feladatok kÃ¶zÃ¶tt..."
          aria-label="KeresÃ©s a feladatok kÃ¶zÃ¶tt"
        >
      </div>
      <div class="filter-buttons" role="tablist" aria-label="Feladat szÅ±rÅ‘k">
        <button class="filter-btn active" data-filter="all" role="tab" aria-selected="true">
          ğŸ“‹ Ã–sszes
        </button>
        <button class="filter-btn" data-filter="pending" role="tab" aria-selected="false">
          â³ Folyamatban
        </button>
        <button class="filter-btn" data-filter="completed" role="tab" aria-selected="false">
          âœ… Befejezett
        </button>
        <button class="filter-btn" data-filter="shared" role="tab" aria-selected="false">
          ğŸ‘¥ Megosztott
        </button>
        <button class="filter-btn" data-filter="private" role="tab" aria-selected="false">
          ğŸ”’ PrivÃ¡t
        </button>
      </div>
    </section>

    <!-- Feladat lista -->
    <section class="task-section" aria-labelledby="tasks-heading">
      <h2 id="tasks-heading" style="display: none;">Feladatok listÃ¡ja</h2>
      <div id="list-view" class="task-container" role="list" aria-live="polite">
        <!-- A feladatok dinamikusan betÃ¶ltÅ‘dnek ide -->
      </div>
    </section>

    <!-- StatisztikÃ¡k -->
    <aside class="stats-panel" aria-labelledby="stats-heading">
      <h3 id="stats-heading">ğŸ“Š StatisztikÃ¡k</h3>
      <div class="stats-grid">
        <div class="stat-item">
          <span id="total-tasks" class="stat-number" aria-label="Ã–sszes feladat szÃ¡ma">0</span>
          <span class="stat-label">Ã–sszes</span>
        </div>
        <div class="stat-item">
          <span id="pending-tasks" class="stat-number" aria-label="Folyamatban lÃ©vÅ‘ feladatok szÃ¡ma">0</span>
          <span class="stat-label">Folyamatban</span>
        </div>
        <div class="stat-item">
          <span id="completed-tasks" class="stat-number" aria-label="Befejezett feladatok szÃ¡ma">0</span>
          <span class="stat-label">Befejezett</span>
        </div>
      </div>
    </aside>
  </main>
</div>

<!-- ===== FELADAT MODAL ===== -->
<div id="task-modal" class="modal hidden" role="dialog" aria-labelledby="modal-title" aria-modal="true">
  <div class="modal-content">
    <button class="close-modal" aria-label="Modal bezÃ¡rÃ¡sa">Ã—</button>
    <h2 id="modal-title">Ãšj feladat</h2>
    
    <form id="task-form">
      <div class="form-group">
        <label for="task-title">Feladat neve *</label>
        <input
          type="text"
          id="task-title"
          required
          autocomplete="off"
          aria-describedby="title-help"
        >
        <small id="title-help" style="color: var(--text-secondary);">
          Add meg a feladat rÃ¶vid, tÃ¶mÃ¶r nevÃ©t
        </small>
      </div>
      
      <div class="form-group">
        <label for="task-description">LeÃ­rÃ¡s</label>
        <textarea
          id="task-description"
          rows="3"
          placeholder="RÃ©szletes leÃ­rÃ¡s a feladatrÃ³l..."
          aria-describedby="description-help"
        ></textarea>
        <small id="description-help" style="color: var(--text-secondary);">
          OpcionÃ¡lis rÃ©szletes leÃ­rÃ¡s
        </small>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="task-priority">PrioritÃ¡s</label>
          <select id="task-priority">
            <option value="low">ğŸŸ¢ Alacsony</option>
            <option value="medium" selected>ğŸŸ¡ KÃ¶zepes</option>
            <option value="high">ğŸŸ  Magas</option>
            <option value="urgent">ğŸ”´ SÃ¼rgÅ‘s</option>
          </select>
        </div>
        <div class="form-group">
          <label for="task-category">KategÃ³ria</label>
          <select id="task-category">
            <option value="personal">ğŸ‘¤ SzemÃ©lyes</option>
            <option value="work">ğŸ’¼ Munka</option>
            <option value="shopping">ğŸ›’ BevÃ¡sÃ¡rlÃ¡s</option>
            <option value="health">ğŸ¥ EgÃ©szsÃ©g</option>
            <option value="other">ğŸ“‚ EgyÃ©b</option>
          </select>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="task-date">HatÃ¡ridÅ‘</label>
          <input type="date" id="task-date">
        </div>
        <div class="form-group">
          <label for="task-time">IdÅ‘pont</label>
          <input type="time" id="task-time">
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="estimated-time">BecsÃ¼lt idÅ‘ (perc)</label>
          <input
            type="number"
            id="estimated-time"
            min="1"
            max="1440"
            placeholder="pl. 30"
          >
        </div>
        <div class="form-group">
          <label for="task-type">LÃ¡thatÃ³sÃ¡g</label>
          <select id="task-type">
            <option value="private">ğŸ”’ PrivÃ¡t (csak Ã©n lÃ¡tom)</option>
            <option value="shared">ğŸ‘¥ Megosztott (partnerek is lÃ¡tjÃ¡k)</option>
          </select>
        </div>
      </div>
      
      <div class="form-actions">
        <button type="button" id="cancel-task" class="btn-secondary">âŒ MÃ©gse</button>
        <button type="submit" class="btn-primary">ğŸ’¾ MentÃ©s</button>
      </div>
    </form>
  </div>
</div>

<!-- ===== MEGOSZTÃS MODAL ===== -->
<div id="share-modal" class="modal hidden" role="dialog" aria-labelledby="share-title" aria-modal="true">
  <div class="modal-content">
    <button id="close-share" class="close-modal" aria-label="MegosztÃ¡s modal bezÃ¡rÃ¡sa">Ã—</button>
    <h2 id="share-title">ğŸ‘¥ Feladatok megosztÃ¡sa</h2>
    
    <p style="color: var(--text-secondary); margin-bottom: 20px;">
      Oszd meg a feladataidat egy partnerrel! A megosztott feladatokat mindketten lÃ¡tjÃ¡tok Ã©s szerkeszthetitek.
    </p>
    
    <div class="form-group">
      <label for="share-email">Partner email cÃ­me</label>
      <div style="display: flex; gap: 8px;">
        <input
          type="email"
          id="share-email"
          placeholder="partner@email.com"
          style="flex: 1;"
          aria-describedby="share-help"
        >
        <button id="share-btn" class="btn-primary">ğŸ¤ MegosztÃ¡s</button>
      </div>
      <small id="share-help" style="color: var(--text-secondary);">
        A partnerednek regisztrÃ¡lva kell lennie ezzel az email cÃ­mmel
      </small>
    </div>
    
    <div class="shared-users">
      <h3>AktuÃ¡lis partnerek:</h3>
      <div id="shared-users" aria-live="polite">
        <!-- A megosztott felhasznÃ¡lÃ³k dinamikusan betÃ¶ltÅ‘dnek ide -->
      </div>
    </div>
  </div>
</div>

<!-- ===== HIDDEN ELEMENTS FOR SCREEN READERS ===== -->
<div aria-live="polite" aria-atomic="true" class="sr-only" id="status-updates">
  <!-- KÃ©pernyÅ‘olvasÃ³k szÃ¡mÃ¡ra stÃ¡tusz frissÃ­tÃ©sek -->
</div>

<!-- ===== PWA SCRIPT ===== -->
<script>
// PWA szolgÃ¡ltatÃ¡sok inicializÃ¡lÃ¡sa
if ('serviceWorker' in navigator) {
  window.addEventListener('load', async () => {
    try {
      const registration = await navigator.serviceWorker.register('./sw.js');
      console.log('âœ… SW registered: ', registration);
      
      // Service Worker Ã¼zenetek figyelÃ©se
      navigator.serviceWorker.addEventListener('message', (event) => {
        if (event.data && event.data.type === 'SYNC_COMPLETE') {
          console.log('âœ… Background sync complete:', event.data.message);
          if (window.taskManager) {
            window.taskManager.showNotification(event.data.message);
          }
        }
      });
      
    } catch (error) {
      console.log('âŒ SW registration failed: ', error);
    }
  });
}

// Online/Offline Ã¡llapot figyelÃ©se
function updateConnectionStatus() {
  const indicator = document.getElementById('connection-indicator');
  const text = document.getElementById('connection-text');
  
  if (navigator.onLine) {
    indicator.style.background = '#4CAF50';
    text.textContent = 'ğŸŒ Online';
    document.body.classList.remove('offline');
  } else {
    indicator.style.background = '#FF9800';
    text.textContent = 'ğŸ“´ Offline';
    document.body.classList.add('offline');
  }
  
  indicator.classList.remove('hidden');
  setTimeout(() => {
    if (navigator.onLine) {
      indicator.classList.add('hidden');
    }
  }, 3000);
}

window.addEventListener('online', updateConnectionStatus);
window.addEventListener('offline', updateConnectionStatus);

// Kezdeti Ã¡llapot
document.addEventListener('DOMContentLoaded', () => {
  updateConnectionStatus();
});

// BillentyÅ±parancsok sÃºgÃ³
document.addEventListener('keydown', (e) => {
  if (e.key === 'F1' || (e.ctrlKey && e.key === '/')) {
    e.preventDefault();
    alert(`âŒ¨ï¸ BillentyÅ±parancsok:

Ctrl/Cmd + N - Ãšj feladat
Ctrl/Cmd + F - KeresÃ©s
Escape - Modal bezÃ¡rÃ¡sa
F1 / Ctrl+/ - Ez a sÃºgÃ³`);
  }
});
</script>

<!-- ===== MAIN APPLICATION SCRIPT ===== -->
<script type="module" src="./script.js"></script>

<!-- ===== STRUCTURED DATA ===== -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Task Manager",
  "url": "https://sufnex.github.io/task-manager/",
  "description": "Collaborative task management application with real-time synchronization",
  "applicationCategory": "Productivity",
  "operatingSystem": "Web",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "author": {
    "@type": "Person",
    "name": "Task Manager Team"
  }
}
</script>

</body>
</html>
