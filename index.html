<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Task Manager PWA - Collaborative Task Management with Firebase">
    <meta name="keywords" content="task manager, todo, collaboration, firebase, pwa">
    <meta name="author" content="Task Manager App">
    
    <!-- Theme colors -->
    <meta name="theme-color" content="#2196F3">
    <meta name="msapplication-navbutton-color" content="#2196F3">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- PWA Meta tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Task Manager">
    <meta name="application-name" content="Task Manager">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Task Manager - Collaborative Todo App">
    <meta property="og:description" content="Modern task management with real-time collaboration">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://your-username.github.io/task-manager/">
    <meta property="og:image" content="./icons/icon-512x512.png">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Task Manager - Collaborative Todo App">
    <meta name="twitter:description" content="Modern task management with real-time collaboration">
    <meta name="twitter:image" content="./icons/icon-512x512.png">
    
    <title>Task Manager - Collaborative PWA</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="./icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./icons/icon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./icons/icon-180x180.png">
    <link rel="mask-icon" href="./icons/icon.svg" color="#2196F3">
    
    <!-- Styles -->
    <link rel="stylesheet" href="./style.css">
    
    <!-- Preconnect to Firebase -->
    <link rel="preconnect" href="https://www.gstatic.com">
    <link rel="preconnect" href="https://task-manager-sb.firebaseapp.com">
    
    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
</head>

<body>
    <!-- Connection Indicator -->
    <div id="connection-indicator" class="hidden">
        <span id="connection-text">üåê Online</span>
    </div>

    <!-- ===== AUTHENTICATION MODAL ===== -->
    <div id="auth-modal" class="modal">
        <div class="auth-container">
            <h1>üöÄ Task Manager</h1>
            <p style="color: var(--text-secondary); margin-bottom: 24px;">
                Collaborative task management with real-time sync
            </p>
            
            <!-- Bejelentkez√©s Form -->
            <form id="login-form" class="auth-form">
                <h2>Bejelentkez√©s</h2>
                
                <div class="form-group">
                    <input type="email" id="login-email" placeholder="Email c√≠m" required autocomplete="email">
                </div>
                
                <div class="form-group">
                    <input type="password" id="login-password" placeholder="Jelsz√≥" required autocomplete="current-password" minlength="6">
                </div>
                
                <button type="submit" class="btn-primary">
                    üîë Bejelentkez√©s
                </button>
                
                <button type="button" id="google-signin" class="btn-google">
                    üåê Google bejelentkez√©s
                </button>
                
                <p>
                    Nincs m√©g fi√≥kod? 
                    <a href="#" id="show-register">Regisztr√°ci√≥</a>
                </p>
            </form>
            
            <!-- Regisztr√°ci√≥ Form -->
            <form id="register-form" class="auth-form hidden">
                <h2>Regisztr√°ci√≥</h2>
                
                <div class="form-group">
                    <input type="text" id="register-name" placeholder="Teljes n√©v" required autocomplete="name">
                </div>
                
                <div class="form-group">
                    <input type="email" id="register-email" placeholder="Email c√≠m" required autocomplete="email">
                </div>
                
                <div class="form-group">
                    <input type="password" id="register-password" placeholder="Jelsz√≥ (min. 6 karakter)" required autocomplete="new-password" minlength="6">
                </div>
                
                <button type="submit" class="btn-primary">
                    ‚ú® Regisztr√°ci√≥
                </button>
                
                <p>
                    Van m√°r fi√≥kod? 
                    <a href="#" id="show-login">Bejelentkez√©s</a>
                </p>
            </form>
        </div>
    </div>

    <!-- ===== F≈ê ALKALMAZ√ÅS ===== -->
    <div id="main-app" class="hidden">
        <!-- Header -->
        <header class="header">
            <h1>üìã Task Manager</h1>
            
            <div class="header-controls">
                <div id="user-info">
                    <span>üë§</span>
                    <span id="user-name">Felhaszn√°l√≥</span>
                </div>
                
                <button id="open-share" class="btn-icon" title="Feladatok megoszt√°sa" aria-label="Feladatok megoszt√°sa">
                    üë•
                </button>
                
                <button id="add-task-btn" class="btn-icon" title="√öj feladat hozz√°ad√°sa" aria-label="√öj feladat hozz√°ad√°sa">
                    ‚ûï
                </button>
                
                <button id="view-toggle" class="btn-icon" title="N√©zet v√°lt√°s" aria-label="N√©zet v√°lt√°s">
                    üìÖ
                </button>
                
                <button id="logout-btn" class="btn-icon" title="Kijelentkez√©s" aria-label="Kijelentkez√©s">
                    üö™
                </button>
            </div>
        </header>

        <main class="main-content">
            <!-- Sz≈±r≈ëk √©s keres√©s -->
            <section class="filters" aria-labelledby="filters-heading">
                <h2 id="filters-heading" style="display: none;">Sz≈±r≈ëk √©s keres√©s</h2>
                
                <div class="search-box">
                    <input 
                        type="text" 
                        id="search-input" 
                        placeholder="üîç Keres√©s a feladatok k√∂z√∂tt..." 
                        aria-label="Keres√©s a feladatok k√∂z√∂tt"
                    >
                </div>
                
                <div class="filter-buttons" role="tablist" aria-label="Feladat sz≈±r≈ëk">
                    <button class="filter-btn active" data-filter="all" role="tab" aria-selected="true">
                        üìã √ñsszes
                    </button>
                    <button class="filter-btn" data-filter="pending" role="tab" aria-selected="false">
                        ‚è≥ Folyamatban
                    </button>
                    <button class="filter-btn" data-filter="completed" role="tab" aria-selected="false">
                        ‚úÖ Befejezett
                    </button>
                    <button class="filter-btn" data-filter="shared" role="tab" aria-selected="false">
                        üë• Megosztott
                    </button>
                    <button class="filter-btn" data-filter="private" role="tab" aria-selected="false">
                        üîí Priv√°t
                    </button>
                </div>
            </section>

            <!-- Feladat lista -->
            <section class="task-section" aria-labelledby="tasks-heading">
                <h2 id="tasks-heading" style="display: none;">Feladatok list√°ja</h2>
                <div id="list-view" class="task-container" role="list" aria-live="polite">
                    <!-- A feladatok dinamikusan bet√∂lt≈ëdnek ide -->
                </div>
            </section>

            <!-- Statisztik√°k -->
            <aside class="stats-panel" aria-labelledby="stats-heading">
                <h3 id="stats-heading">üìä Statisztik√°k</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span id="total-tasks" class="stat-number" aria-label="√ñsszes feladat sz√°ma">0</span>
                        <span class="stat-label">√ñsszes</span>
                    </div>
                    <div class="stat-item">
                        <span id="pending-tasks" class="stat-number" aria-label="Folyamatban l√©v≈ë feladatok sz√°ma">0</span>
                        <span class="stat-label">Folyamatban</span>
                    </div>
                    <div class="stat-item">
                        <span id="completed-tasks" class="stat-number" aria-label="Befejezett feladatok sz√°ma">0</span>
                        <span class="stat-label">Befejezett</span>
                    </div>
                </div>
            </aside>
        </main>
    </div>

    <!-- ===== FELADAT MODAL ===== -->
    <div id="task-modal" class="modal hidden" role="dialog" aria-labelledby="modal-title" aria-modal="true">
        <div class="modal-content">
            <button class="close-modal" aria-label="Modal bez√°r√°sa">√ó</button>
            
            <h2 id="modal-title">√öj feladat</h2>
            
            <form id="task-form">
                <div class="form-group">
                    <label for="task-title">Feladat neve *</label>
                    <input 
                        type="text" 
                        id="task-title" 
                        required 
                        autocomplete="off"
                        aria-describedby="title-help"
                    >
                    <small id="title-help" style="color: var(--text-secondary);">
                        Add meg a feladat r√∂vid, t√∂m√∂r nev√©t
                    </small>
                </div>
                
                <div class="form-group">
                    <label for="task-description">Le√≠r√°s</label>
                    <textarea 
                        id="task-description" 
                        rows="3" 
                        placeholder="R√©szletes le√≠r√°s a feladatr√≥l..."
                        aria-describedby="description-help"
                    ></textarea>
                    <small id="description-help" style="color: var(--text-secondary);">
                        Opcion√°lis r√©szletes le√≠r√°s
                    </small>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-priority">Priorit√°s</label>
                        <select id="task-priority">
                            <option value="low">üü¢ Alacsony</option>
                            <option value="medium" selected>üü° K√∂zepes</option>
                            <option value="high">üü† Magas</option>
                            <option value="urgent">üî¥ S√ºrg≈ës</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="task-category">Kateg√≥ria</label>
                        <select id="task-category">
                            <option value="personal">üë§ Szem√©lyes</option>
                            <option value="work">üíº Munka</option>
                            <option value="shopping">üõí Bev√°s√°rl√°s</option>
                            <option value="health">üè• Eg√©szs√©g</option>
                            <option value="other">üìÇ Egy√©b</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-date">Hat√°rid≈ë</label>
                        <input type="date" id="task-date">
                    </div>
                    
                    <div class="form-group">
                        <label for="task-time">Id≈ëpont</label>
                        <input type="time" id="task-time">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="estimated-time">Becs√ºlt id≈ë (perc)</label>
                        <input 
                            type="number" 
                            id="estimated-time" 
                            min="1" 
                            max="1440"
                            placeholder="pl. 30"
                        >
                    </div>
                    
                    <div class="form-group">
                        <label for="task-type">L√°that√≥s√°g</label>
                        <select id="task-type">
                            <option value="private">üîí Priv√°t (csak √©n l√°tom)</option>
                            <option value="shared">üë• Megosztott (partnerek is l√°tj√°k)</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" id="cancel-task" class="btn-secondary">
                        ‚ùå M√©gse
                    </button>
                    <button type="submit" class="btn-primary">
                        üíæ Ment√©s
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- ===== MEGOSZT√ÅS MODAL ===== -->
    <div id="share-modal" class="modal hidden" role="dialog" aria-labelledby="share-title" aria-modal="true">
        <div class="modal-content">
            <button id="close-share" class="close-modal" aria-label="Megoszt√°s modal bez√°r√°sa">√ó</button>
            
            <h2 id="share-title">üë• Feladatok megoszt√°sa</h2>
            
            <p style="color: var(--text-secondary); margin-bottom: 20px;">
                Oszd meg a feladataidat egy partnerrel! A megosztott feladatokat mindketten l√°tj√°tok √©s szerkeszthetitek.
            </p>
            
            <div class="form-group">
                <label for="share-email">Partner email c√≠me</label>
                <div style="display: flex; gap: 8px;">
                    <input 
                        type="email" 
                        id="share-email" 
                        placeholder="partner@email.com" 
                        style="flex: 1;"
                        aria-describedby="share-help"
                    >
                    <button id="share-btn" class="btn-primary">
                        ü§ù Megoszt√°s
                    </button>
                </div>
                <small id="share-help" style="color: var(--text-secondary);">
                    A partnerednek regisztr√°lva kell lennie ezzel az email c√≠mmel
                </small>
            </div>
            
            <div class="shared-users">
                <h3>Aktu√°lis partnerek:</h3>
                <div id="shared-users" aria-live="polite">
                    <!-- A megosztott felhaszn√°l√≥k dinamikusan bet√∂lt≈ëdnek ide -->
                </div>
            </div>
        </div>
    </div>

    <!-- ===== HIDDEN ELEMENTS FOR SCREEN READERS ===== -->
    <div aria-live="polite" aria-atomic="true" class="sr-only" id="status-updates">
        <!-- K√©perny≈ëolvas√≥k sz√°m√°ra st√°tusz friss√≠t√©sek -->
    </div>

    <!-- ===== LOADING INDICATOR ===== -->
    <div id="loading-indicator" class="hidden" style="
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: var(--bg-card);
        padding: 20px;
        border-radius: 8px;
        box-shadow: var(--shadow-large);
        z-index: 9999;
        text-align: center;
    ">
        <div style="
            width: 40px;
            height: 40px;
            border: 4px solid var(--text-hint);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        "></div>
        <p>Bet√∂lt√©s...</p>
    </div>

    <!-- ===== PWA SCRIPT ===== -->
    <script>
        // PWA szolg√°ltat√°sok inicializ√°l√°sa
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    const registration = await navigator.serviceWorker.register('./sw.js');
                    console.log('‚úÖ SW registered: ', registration);
                } catch (error) {
                    console.log('‚ùå SW registration failed: ', error);
                }
            });
        }

        // Online/Offline √°llapot figyel√©se
        function updateConnectionStatus() {
            const indicator = document.getElementById('connection-indicator');
            const text = document.getElementById('connection-text');
            
            if (navigator.onLine) {
                indicator.style.background = '#4CAF50';
                text.textContent = 'üåê Online';
                document.body.classList.remove('offline');
            } else {
                indicator.style.background = '#FF9800';
                text.textContent = 'üì¥ Offline';
                document.body.classList.add('offline');
            }
            
            indicator.classList.remove('hidden');
            setTimeout(() => {
                if (navigator.onLine) {
                    indicator.classList.add('hidden');
                }
            }, 3000);
        }

        window.addEventListener('online', updateConnectionStatus);
        window.addEventListener('offline', updateConnectionStatus);

        // Kezdeti √°llapot
        document.addEventListener('DOMContentLoaded', () => {
            updateConnectionStatus();
        });

        // Billenty≈±parancsok s√∫g√≥
        document.addEventListener('keydown', (e) => {
            if (e.key === 'F1' || (e.ctrlKey && e.key === '/')) {
                e.preventDefault();
                alert(`‚å®Ô∏è Billenty≈±parancsok:
                
Ctrl/Cmd + N - √öj feladat
Ctrl/Cmd + F - Keres√©s
Escape - Modal bez√°r√°sa
F1 / Ctrl+/ - Ez a s√∫g√≥`);
            }
        });
    </script>

    <!-- ===== MAIN APPLICATION SCRIPT ===== -->
    <script type="module" src="./script.js"></script>

    <!-- ===== STRUCTURED DATA ===== -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Task Manager",
        "url": "https://your-username.github.io/task-manager/",
        "description": "Collaborative task management application with real-time synchronization",
        "applicationCategory": "Productivity",
        "operatingSystem": "Web",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "author": {
            "@type": "Person",
            "name": "Task Manager Team"
        }
    }
    </script>

    <!-- ===== ANALYTICS (opcion√°lis) ===== -->
    <!--
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    -->
</body>
</html>
